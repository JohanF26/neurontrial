<!DOCTYPE html>
<!--
	test app
-->
<html>

	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="css/normalize.css">
		<link href='http://fonts.googleapis.com/css?family=Dosis:200,300,400,500,600,700,800' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/responsive.css">
		<link rel="stylesheet" href="css/jquery.sidr.dark.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="js/parse-1.2.19.js"></script>
		<script src="js/jquery-1.11.1.js"></script>
		<script type="text/javascript">
			Parse.initialize("IiLH73bMedzAQDrSPQ9MMYIut8AnuDAzp14FQZsT", "WIQ1jk87XOqQKuQxwWBeWI08W3I7K3LC05e8VhW3");
		</script>
	</head>

	<body>
		<header>
			<a href="profile.html"><img src="img/logo.png" alt="logo" id="logo" height="75px" width="150px"></a>
			<a id="simple-menu" href="#sidr"><img src="img/settings.png" alt="settings" id="settings" height="50px" width="50px"></a>

			<div id="sidr">
				<ul>
	    			<li><a href="#">Edit Profile</a></li>
	    			<li><a href="booklist.html">My Books</a></li>
	    			<li><a href="#">Sign Out</a></li>
	  			</ul>
			</div>
	 
			<script>
			$(document).ready(function() {
	  		$('#simple-menu').sidr();
			});
			</script>
		</header>
		
		<div id="theForms">
		<div class="col-xs-12">
		<div class="pagetitle">
		<h2>Find a Book</h2>
		</div>
		</div>
<!-- Search By Title -->
		<form id="Titleform" class="book_form" name="book_form" action="" method="post">
			<div class="col-xs-12">
				<ul>							
					<li>
						<label for="title">Title:</label> 
						<input id="title" type="text" name="title" />
					</li>
					
					<li>
							<button id="submitbtnTitle"class="submit" type="Submit">Search by Title</button>
					</li>
				</ul>
			</div>
		</form>	
<!-- Search By Author -->
		<form id="Authorform" class="book_form" name="book_form" action="" method="post">
			<div class="col-xs-12">
				<ul>							
					<li>
						<label for="author">Author:</label>
						<input id="author" type="text" name="author" />
					</li>
					
					<li>
							<button id="submitbtnAuthor"class="submit" type="Submit">Search by Author</button>
					</li>
				</ul>
			</div>
		</form>	
<!-- Search By ISBN -->
		<form id="Isbnform" class="book_form" name="book_form" action="" method="post">
			<div class="col-xs-12">
				<ul>							
					<li>
						<label for="Isbnnmbr">ISBN Number:</label>
						<input id="isbn" type="text" name="ispncode" />
					</li>
					
					<li>
							<button id="submitbtnIsbn"class="submit" type="Submit">Search by ISBN Number</button>
					</li>
				</ul>
			</div>
		</form>	
<!-- End of all Search Options, The div below is to clear the page upon the submission of either form -->
	</div>

<!-- This is the "result box" with info for every entry-->
				
				<div id="results">
					<h1 id="bookName">txt</h1>
					<p id="author">txt</p>
					<p id="condition">txt</p>
				</div>

				<!--  ***********************START OF JAVASCRIPT***********************  -->
				<!--  ***********************START OF JAVASCRIPT***********************  -->
				<!--  ***********************START OF JAVASCRIPT***********************  -->
				<!--  ***********************START OF JAVASCRIPT***********************  -->

		<script src="js/jquery.sidr.min.js"></script>
		<script type="text/javascript">
			Parse.initialize("IiLH73bMedzAQDrSPQ9MMYIut8AnuDAzp14FQZsT", "WIQ1jk87XOqQKuQxwWBeWI08W3I7K3LC05e8VhW3");

			$(document).ready(function(){
				$("#results").hide();
				});

// This is for search by Title
			$("#Titleform").submit(function(event){

				event.preventDefault();

				var AddBook = Parse.Object.extend("AddBook");

					var title = $("#title").val().toLowerCase();
					var author = $("#author").val();
					var isbn = $("isbn").val();

				var titleQuery = new Parse.Query(AddBook);

				titleQuery.startsWith("searchTitle", title);

				titleQuery.find({
  					success: function(results) {
	    				console.log("Successfully retrieved " + results.length + " books");
	    				$(".col-xs-12").remove();
						
						 // Do something with the returned Parse.Object values
					    for (var i = 0; i < results.length; i++) { 
					      var object = results[i];

					      var Title = object.get('title');
					      var Author = object.get('author');
					      var Condition = object.get('condition');
					      var Edition = object.get('edition'); 

					      console.log(object.get('owner'));
					      console.log(Author);
					      console.log(Condition);
					      console.log(Title);

					      // This is the magical code which creates a new entry everytime a result comes up!!
					      $("#results").clone().appendTo("body");
					      $("#results").show();
					      $('#bookName').text(Title + "(Edition No."+ Edition + ")");
					      $('#author').text("By: " + Author);
					      $('#condition').text("Condition: " + Condition);			

					    }
    				
    				}, //this closes success

				  error: function(error) {
				    alert("Error: " + error.code + " " + error.message);
				  }
				});
			});
// This is for Search by Author
			
</script>


	</body>
</html>